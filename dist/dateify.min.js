!function(e,t){if("function"==typeof define&&define.amd)define(["exports","decorators-js","js-typed"],t);else if("undefined"!=typeof exports)t(exports,require("decorators-js"),require("js-typed"));else{var r={exports:{}};t(r.exports,e.decoratorsJs,e.jsTyped),e.dateify=r.exports}}(this,function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function u(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.toInputDateString=e.isValidTime=e.isValidDate=e.inRange=e.order=e.destructure=e.toUTCDateString=e.isLeapYear=e.deDateify=e.dateify=e.toPaperTime=e.toPaperDate=e.toTimeInput=e.toDateInput=void 0;var i=n(t),a=n(r),o=function(){function e(e,t){var r=[],n=!0,u=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(f){u=!0,i=f}finally{try{!n&&o["return"]&&o["return"]()}finally{if(u)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();"function"!=typeof Number.isNaN&&(Number.isNaN=function(e){return e!==e});var f=/(?:[0-9]{4}[-\/][0-1][0-9][-\/][0-3][0-9])|(?:[0-1][0-9][-\/][0-3][0-9][-\/][0-9]{4})/,s=/[0-2][0-9]:[0-5][0-9](?::[0-5][0-9])?[+-Z]?(?:[0-2][0-9]:[0-5][0-9])?/,d="yyyy-mm-dd",c="hh:mm",l=new RegExp([/[A-Z][a-z]{2} [A-Z][a-z]{2} [0-3][0-9] [0-9]{4}/,/(?: [0-9]{2}:[0-9]{2}:[0-9]{2} GMT[-+][0-2][0-9][0-5][0-9] \([A-Z]{3}\))?/].map(function(e){return e.source}).join(""),"g"),p=function(){if("undefined"==typeof document)return!1;var e=document.createElement("input"),t="not-a-date";return e.setAttribute("type","date"),e.setAttribute("value",t),e.value!==t}(),g=i.padInt(2),m=a.guardClass(0,Date),v=i.debounce(500);a.defType("__dateString",function(e){return a.isType("string",e)&&e.match(l)}),a.defType("__isoDateString",function(e){return a.isType("string",e)&&e.match(f)}),a.defType("__Array<Number>",function(e){return a.isType("array",e)&&e.every(function(e){return!Number.isNaN(+e)})});var y=a.Dispatcher([a.guard("date",function(e){return Number.isNaN(e.getTime())?[]:[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()]}),a.guard("__dateString",function(e){var t=new Date(e);return Number.isNaN(t.getTime())?[]:[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()]}),a.guard("string",function(e){var t=[],r=-1===e.indexOf("T")?" ":"T",n=-1===e.indexOf("-")?"/":"-",u=e.split(r),i=o(u,2),a=i[0],f=i[1],s=a.split(n).filter(function(e){return e}).map(Number),d=3===s.length&&s.every(function(e){return e>0});if(d){var c=o(s,3),l=c[0],p=c[1],g=c[2],v=void 0,h=void 0,T=void 0;switch(!0){case l>31:if(13>p){var b=o(s,3);v=b[0],h=b[1],T=b[2]}else{var D=o(s,3);v=D[0],T=D[1],h=D[2]}h-=1;break;case g>31:if(13>l){var N=o(s,3);h=N[0],T=N[1],v=N[2]}else{var A=o(s,3);T=A[0],h=A[1],v=A[2]}h-=1;break;default:T=h=v=null}t.push(v,h,T)}else f=a,t.push(null,null,null);var w=null;f&&(w=function(e){var t=-1!==e.indexOf("Z"),r=-1!==e.indexOf("+"),n=-1!==e.indexOf("-"),u=[t,n,r].reduce(function(e,t,r){return t&&e.push(r),e},[]);switch(u.length){case 0:return null;case 1:return["Z","-","+"][u[0]];default:throw new Error("Attempted to parse a datestring with both a 'Z' and\n              a timezone.")}}(f));var x=w?f.split(w):[f,null],_=o(x,2),O=_[0],E=_[1],S=O?O.split(":").filter(function(e){return e}).map(Number):[],j=E?function(){var e=w,t=E.split(":"),r=o(t,2),n=r[0],u=r[1];return 60*(60*Number(""+e+n)+Number(""+e+u))*1e3}():null,I=o(S,3),M=I[0],Z=I[1],z=I[2],F=M>=0&&24>=M&&Z>=0&&59>=Z&&(null==z||z>=0&&59>=z);if(F&&(t.push(M,Z),null!=z&&t.push(z)),t[0]&&null!=w){var L=m.apply(void 0,t),P=60*L.getTimezoneOffset()*1e3,Y=L.getTime()-P-j;return y(m(Y))}return t.every(function(e){return null==e})?[]:t})]),h=function(e){var t=y(e);return t.length>2?t.slice(0,3).every(function(e){return a.isType("number",e)}):!1},T=function(e){var t=y(e);return t.length>4?t.slice(3,5).every(function(e){return a.isType("number",e)}):!1},b=a.Dispatcher([a.guard("date",function(e){return h(e)}),a.guard("string",function(e){return h(e)})]);b.setDefault(function(){return!1});var D=a.Dispatcher([a.guard("date",function(e){return T(e)}),a.guard("string",function(e){return T(e)}),a.guard("number",function(e){return!Number.isNaN(e)})]);D.setDefault(function(){return!1});var N=a.guard(function(e,t){return p?t.setAttribute("type",e):!function(){t.setAttribute("pattern","date"===e?f:s),t.DEFAULT="date"===e?d:c,t.value=t.DEFAULT;var r="date"===e?b:D;t.addEventListener("input",v(function(){t.value?t.isValid=r(t.value):t.value=t.DEFAULT}))}(),t}),A=function(e){return function(t){return t||document.createElement(e)}},w=A("input"),x=A("paper-input"),_=N("date"),O=N("time"),E=function(e){return _(w(e))},S=function(e){return O(w(e))},j=function(e){return _(x(e))},I=function(e){return O(x(e))},M=a.Dispatcher([a.guard("string",function(e){var t=y(e);return t.length?m.apply(void 0,u(t)):(console.warn("Attempted to parse non-date string "+e+" as a date"),new Date(""))}),a.guard("number",function(e){return m(e)}),a.guard("date",function(e){return e}),a.guard("__Array<Number>",function(e){return m.apply(void 0,u(e))})]),Z=a.guard("date",function(e){var t=y(e),r=o(t,6),n=r[0],u=r[1],i=r[2],a=r[3],f=r[4],s=r[5],d=e.getTimezoneOffset(),c=d>0?"-":"+",l=d/60|0,p=d%60;return n+"-"+g(u+1)+"-"+g(i)+"T"+g(a)+":"+g(f)+":"+g(s)+(""+c+g(l)+":"+g(p))}),z=function(e){return a.guard("number",function(t){if(0===t)throw e;var r=!0;return 4===t||0>t||t%4?r=!1:t%400&&(t%100||(r=!1)),r})}(new Error("Year zero does not exist, refers to 1 BCE")),F=function(e){var t=M(e),r=new Date(t.getTime()+60*t.getTimezoneOffset()*1e3),n=y(r),u=o(n,6),i=u[0],a=u[1],f=u[2],s=u[3],d=u[4],c=u[5];return i+"-"+g(a+1)+"-"+g(f)+("T"+g(s)+":"+g(d)+":"+g(c)+"Z")},L=i.unGather(function(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return t.sort(function(e,t){return e.getTime()-t.getTime()})}),P=a.guard(["date","date","date"],function(e,t,r){var n=L(e,t),u=o(n,2),i=u[0],a=u[1],f=i.getTime(),s=a.getTime(),d=r.getTime();return s>=d&&d>=f}),Y=a.guard("date",function(e){return e.getFullYear()+"-"+g(e.getMonth()+1)+"-"+g(e.getDate())}),U=a.Dispatcher([Y,a.guard("string",function(e){return Y(M(e))})]);e.toDateInput=E,e.toTimeInput=S,e.toPaperDate=j,e.toPaperTime=I,e.dateify=M,e.deDateify=Z,e.isLeapYear=z,e.toUTCDateString=F,e.destructure=y,e.order=L,e.inRange=P,e.isValidDate=b,e.isValidTime=D,e.toInputDateString=U});