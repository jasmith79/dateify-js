!function(e,t){if("function"==typeof define&&define.amd)define(["exports","decorators-js","js-typed"],t);else if("undefined"!=typeof exports)t(exports,require("decorators-js"),require("js-typed"));else{var r={exports:{}};t(r.exports,e.decoratorsJs,e.jsTyped),e.dateify=r.exports}}(this,function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function u(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.isValidTime=e.isValidDate=e.inRange=e.order=e.destructure=e.toUTCDateString=e.isLeapYear=e.deDateify=e.dateify=e.toPaperTime=e.toPaperDate=e.toTimeInput=e.toDateInput=void 0;var i=n(t),a=n(r),o=function(){function e(e,t){var r=[],n=!0,u=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){u=!0,i=s}finally{try{!n&&o["return"]&&o["return"]()}finally{if(u)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();"function"!=typeof Number.isNaN&&(Number.isNaN=function(e){return e!==e});var s=a.Dispatcher([a.guard("date",function(e){return Number.isNaN(e.getTime())?[]:[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()]}),a.guard("__dateString",function(e){var t=new Date(e);return Number.isNaN(t.getTime())?[]:[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()]}),a.guard("string",function(e){var t=[],r=-1===e.indexOf("T")?" ":"T",n=-1===e.indexOf("-")?"/":"-",u=e.split(r),i=o(u,2),a=i[0],f=i[1],d=a.split(n).map(Number),c=3===d.length&&d.every(function(e){return e>0});if(c){var l=o(d,3),p=l[0],g=l[1],v=l[2],m=void 0,h=void 0,y=void 0;switch(!0){case p>31:if(13>g){var T=o(d,3);m=T[0],h=T[1],y=T[2]}else{var b=o(d,3);m=b[0],y=b[1],h=b[2]}h-=1;break;case v>31:if(13>p){var D=o(d,3);h=D[0],y=D[1],m=D[2]}else{var A=o(d,3);y=A[0],h=A[1],m=A[2]}h-=1;break;default:y=h=m=null}t.push(m,h,y)}else f=a,t.push(null,null,null);var w=null;f&&(w=function(e){var t=-1!==e.indexOf("Z"),r=-1!==e.indexOf("+"),n=-1!==e.indexOf("-"),u=[t,n,r].reduce(function(e,t,r){return t&&e.push(r),e},[]);switch(u.length){case 0:return null;case 1:return["Z","-","+"][u[0]];default:throw new Error("Attempted to parse a datestring with both a 'Z' and\n              a timezone.")}}(f));var x=w?f.split(w):[f,null],_=o(x,2),O=_[0],E=_[1],j=O?O.split(":").map(Number):[],S=E?function(){var e=w,t=E.split(":"),r=o(t,2),n=r[0],u=r[1];return 60*(60*Number(""+e+n)+Number(""+e+u))*1e3}():null,Z=o(j,3),z=Z[0],M=Z[1],I=Z[2],L=z>=0&&24>=z&&M>=0&&59>=M&&(null==I||I>=0&&59>=I);if(L&&(t.push(z,M),null!=I&&t.push(I)),t[0]&&null!=w){var P=N.apply(void 0,t),F=60*P.getTimezoneOffset()*1e3,U=P.getTime()-F-S;return s(N(U))}return t.every(function(e){return null==e})?[]:t})]),f=function(e){var t=s(e);return t.length>2?t.slice(0,3).every(function(e){return a.isType("number",e)}):!1},d=function(e){var t=s(e);return t.length>4?t.slice(3,5).every(function(e){return a.isType("number",e)}):!1},c=a.Dispatcher([a.guard("date",function(e){return f(e)}),a.guard("string",function(e){return f(e)})]);c.setDefault(function(){return!1});var l=a.Dispatcher([a.guard("date",function(e){return d(e)}),a.guard("string",function(e){return d(e)}),a.guard("number",function(e){return!Number.isNaN(e)})]);l.setDefault(function(){return!1});var p=/(?:[0-9]{4}[-\/][0-1][0-9][-\/][0-3][0-9])|(?:[0-1][0-9][-\/][0-3][0-9][-\/][0-9]{4})/,g=/[0-2][0-9]:[0-5][0-9](?::[0-5][0-9])?[+-Z]?(?:[0-2][0-9]:[0-5][0-9])?/,v=/^y{1,4}-?m{0,2}-?d{0,2}/i,m=/^h{1,2}:?m{0,2}:?s{0,2}\s*[ap]?/i,h="yyyy-mm-dd",y="hh:mm",T=new RegExp([/[A-Z][a-z]{2} [A-Z][a-z]{2} [0-3][0-9] [0-9]{4}/,/(?: [0-9]{2}:[0-9]{2}:[0-9]{2} GMT[-+][0-2][0-9][0-5][0-9] \([A-Z]{3}\))?/].map(function(e){return e.source}).join(""),"g"),b=function(){if("undefined"==typeof document)return!1;var e=document.createElement("input"),t="not-a-date";return e.setAttribute("type","date"),e.setAttribute("value",t),e.value!==t}(),D=i.padInt(2),N=a.guardClass(0,Date);a.defType("__Array<Number>",function(e){return a.isType("array",e)&&e.every(function(e){return!Number.isNaN(+e)})});var A=i.debounce(500);a.defType("__dateString",function(e){return a.isType("string",e)&&e.match(T)}),a.defType("__isoDateString",function(e){return a.isType("string",e)&&e.match(p)});var w=function(e,t){return a.guard(function(r,n){return b?n.setAttribute("type",r):!function(){n.setAttribute("pattern","date"===r?p:g),n.DEFAULT="date"===r?h:y,n.value=n.DEFAULT;var u="date"===r?t:e;n.validate=function(e){var t=this;t.addEventListener("input",A(function(){t.valid=!1,u.call(t,e)}))},n.validate(function(){this.value||(this.value=this.DEFAULT)})}(),n})}(function(e){var t=this.value.match(m),r=t||this.value.match(g);r?this.valid=!0:e.call(this,this)},function(e){var t=this.value.match(v),r=t||this.value.match(p);r?this.valid=!0:e.call(this,this)}),x=function(e){return function(t){return t||document.createElement(e)}},_=x("input"),O=x("paper-input"),E=w("date"),j=w("time"),S=function(e){return E(_(e))},Z=function(e){return j(_(e))},z=function(e){return E(O(e))},M=function(e){return j(O(e))},I=a.Dispatcher([a.guard("string",function(e){var t=s(e);return t.length?N.apply(void 0,u(t)):(console.warn("Attempted to parse non-date string "+e+" as a date"),new Date(""))}),a.guard("number",function(e){return N(e)}),a.guard("date",function(e){return e}),a.guard("__Array<Number>",function(e){return N.apply(void 0,u(e))})]),L=a.guard("date",function(e){var t=s(e),r=o(t,6),n=r[0],u=r[1],i=r[2],a=r[3],f=r[4],d=r[5],c=e.getTimezoneOffset(),l=c>0?"-":"+",p=c/60|0,g=c%60;return n+"-"+D(u+1)+"-"+D(i)+"T"+D(a)+":"+D(f)+":"+D(d)+(""+l+D(p)+":"+D(g))}),P=function(e){return a.guard("number",function(t){if(0===t)throw e;var r=!0;return 4===t||0>t||t%4?r=!1:t%400&&(t%100||(r=!1)),r})}(new Error("Year zero does not exist, refers to 1 BCE")),F=function(e){var t=I(e),r=new Date(t.getTime()+60*t.getTimezoneOffset()*1e3),n=s(r),u=o(n,6),i=u[0],a=u[1],f=u[2],d=u[3],c=u[4],l=u[5];return i+"-"+D(a+1)+"-"+D(f)+("T"+D(d)+":"+D(c)+":"+D(l)+"Z")},U=i.unGather(function(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return t.sort(function(e,t){return e.getTime()-t.getTime()})}),Y=a.guard(["date","date","date"],function(e,t,r){var n=U(e,t),u=o(n,2),i=u[0],a=u[1],s=i.getTime(),f=a.getTime(),d=r.getTime();return f>=d&&d>=s});e.toDateInput=S,e.toTimeInput=Z,e.toPaperDate=z,e.toPaperTime=M,e.dateify=I,e.deDateify=L,e.isLeapYear=P,e.toUTCDateString=F,e.destructure=s,e.order=U,e.inRange=Y,e.isValidDate=c,e.isValidTime=l});