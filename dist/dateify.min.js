!function(e,t){if("function"==typeof define&&define.amd)define(["exports","decorators-js","js-typed"],t);else if("undefined"!=typeof exports)t(exports,require("decorators-js"),require("js-typed"));else{var r={exports:{}};t(r.exports,e.decoratorsJs,e.jsTyped),e.dateify=r.exports}}(this,function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function u(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.toInputDateString=e.isValidTime=e.isValidDate=e.inRange=e.order=e.destructure=e.toUTCDateString=e.isLeapYear=e.deDateify=e.dateify=e.toPaperTime=e.toPaperDate=e.toTimeInput=e.toDateInput=void 0;var i=n(t),a=n(r),o=function(){function e(e,t){var r=[],n=!0,u=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){u=!0,i=s}finally{try{!n&&o["return"]&&o["return"]()}finally{if(u)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();"function"!=typeof Number.isNaN&&(Number.isNaN=function(e){return e!==e});var s=/(?:[0-9]{4}[-\/][0-1][0-9][-\/][0-3][0-9])|(?:[0-1][0-9][-\/][0-3][0-9][-\/][0-9]{4})/,f=/[0-2][0-9]:[0-5][0-9](?::[0-5][0-9])?[+-Z]?(?:[0-2][0-9]:[0-5][0-9])?/,d=/^y{1,4}-?m{0,2}-?d{0,2}/i,c=/^h{1,2}:?m{0,2}:?s{0,2}\s*[ap]?/i,l="yyyy-mm-dd",p="hh:mm",g=new RegExp([/[A-Z][a-z]{2} [A-Z][a-z]{2} [0-3][0-9] [0-9]{4}/,/(?: [0-9]{2}:[0-9]{2}:[0-9]{2} GMT[-+][0-2][0-9][0-5][0-9] \([A-Z]{3}\))?/].map(function(e){return e.source}).join(""),"g"),v=function(){if("undefined"==typeof document)return!1;var e=document.createElement("input"),t="not-a-date";return e.setAttribute("type","date"),e.setAttribute("value",t),e.value!==t}(),m=i.padInt(2),h=a.guardClass(0,Date),y=i.debounce(500);a.defType("__dateString",function(e){return a.isType("string",e)&&e.match(g)}),a.defType("__isoDateString",function(e){return a.isType("string",e)&&e.match(s)}),a.defType("__Array<Number>",function(e){return a.isType("array",e)&&e.every(function(e){return!Number.isNaN(+e)})});var T=a.Dispatcher([a.guard("date",function(e){return Number.isNaN(e.getTime())?[]:[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()]}),a.guard("__dateString",function(e){var t=new Date(e);return Number.isNaN(t.getTime())?[]:[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()]}),a.guard("string",function(e){var t=[],r=-1===e.indexOf("T")?" ":"T",n=-1===e.indexOf("-")?"/":"-",u=e.split(r),i=o(u,2),a=i[0],s=i[1],f=a.split(n).map(Number),d=3===f.length&&f.every(function(e){return e>0});if(d){var c=o(f,3),l=c[0],p=c[1],g=c[2],v=void 0,m=void 0,y=void 0;switch(!0){case l>31:if(13>p){var b=o(f,3);v=b[0],m=b[1],y=b[2]}else{var D=o(f,3);v=D[0],y=D[1],m=D[2]}m-=1;break;case g>31:if(13>l){var N=o(f,3);m=N[0],y=N[1],v=N[2]}else{var A=o(f,3);y=A[0],m=A[1],v=A[2]}m-=1;break;default:y=m=v=null}t.push(v,m,y)}else s=a,t.push(null,null,null);var w=null;s&&(w=function(e){var t=-1!==e.indexOf("Z"),r=-1!==e.indexOf("+"),n=-1!==e.indexOf("-"),u=[t,n,r].reduce(function(e,t,r){return t&&e.push(r),e},[]);switch(u.length){case 0:return null;case 1:return["Z","-","+"][u[0]];default:throw new Error("Attempted to parse a datestring with both a 'Z' and\n              a timezone.")}}(s));var x=w?s.split(w):[s,null],_=o(x,2),O=_[0],E=_[1],S=O?O.split(":").map(Number):[],j=E?function(){var e=w,t=E.split(":"),r=o(t,2),n=r[0],u=r[1];return 60*(60*Number(""+e+n)+Number(""+e+u))*1e3}():null,I=o(S,3),M=I[0],Z=I[1],z=I[2],F=M>=0&&24>=M&&Z>=0&&59>=Z&&(null==z||z>=0&&59>=z);if(F&&(t.push(M,Z),null!=z&&t.push(z)),t[0]&&null!=w){var L=h.apply(void 0,t),P=60*L.getTimezoneOffset()*1e3,Y=L.getTime()-P-j;return T(h(Y))}return t.every(function(e){return null==e})?[]:t})]),b=function(e){var t=T(e);return t.length>2?t.slice(0,3).every(function(e){return a.isType("number",e)}):!1},D=function(e){var t=T(e);return t.length>4?t.slice(3,5).every(function(e){return a.isType("number",e)}):!1},N=a.Dispatcher([a.guard("date",function(e){return b(e)}),a.guard("string",function(e){return b(e)})]);N.setDefault(function(){return!1});var A=a.Dispatcher([a.guard("date",function(e){return D(e)}),a.guard("string",function(e){return D(e)}),a.guard("number",function(e){return!Number.isNaN(e)})]);A.setDefault(function(){return!1});var w=function(e,t){return a.guard(function(r,n){return v?n.setAttribute("type",r):!function(){n.setAttribute("pattern","date"===r?s:f),n.DEFAULT="date"===r?l:p,n.value=n.DEFAULT;var u="date"===r?t:e;n.validate=function(e){var t=this;t.addEventListener("input",y(function(){t.valid=!1,u.call(t,e)}))},n.validate(function(){this.value||(this.value=this.DEFAULT)})}(),n})}(function(e){var t=this.value.match(c),r=t||this.value.match(f);r?this.valid=!0:e.call(this,this)},function(e){var t=this.value.match(d),r=t||this.value.match(s);r?this.valid=!0:e.call(this,this)}),x=function(e){return function(t){return t||document.createElement(e)}},_=x("input"),O=x("paper-input"),E=w("date"),S=w("time"),j=function(e){return E(_(e))},I=function(e){return S(_(e))},M=function(e){return E(O(e))},Z=function(e){return S(O(e))},z=a.Dispatcher([a.guard("string",function(e){var t=T(e);return t.length?h.apply(void 0,u(t)):(console.warn("Attempted to parse non-date string "+e+" as a date"),new Date(""))}),a.guard("number",function(e){return h(e)}),a.guard("date",function(e){return e}),a.guard("__Array<Number>",function(e){return h.apply(void 0,u(e))})]),F=a.guard("date",function(e){var t=T(e),r=o(t,6),n=r[0],u=r[1],i=r[2],a=r[3],s=r[4],f=r[5],d=e.getTimezoneOffset(),c=d>0?"-":"+",l=d/60|0,p=d%60;return n+"-"+m(u+1)+"-"+m(i)+"T"+m(a)+":"+m(s)+":"+m(f)+(""+c+m(l)+":"+m(p))}),L=function(e){return a.guard("number",function(t){if(0===t)throw e;var r=!0;return 4===t||0>t||t%4?r=!1:t%400&&(t%100||(r=!1)),r})}(new Error("Year zero does not exist, refers to 1 BCE")),P=function(e){var t=z(e),r=new Date(t.getTime()+60*t.getTimezoneOffset()*1e3),n=T(r),u=o(n,6),i=u[0],a=u[1],s=u[2],f=u[3],d=u[4],c=u[5];return i+"-"+m(a+1)+"-"+m(s)+("T"+m(f)+":"+m(d)+":"+m(c)+"Z")},Y=i.unGather(function(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return t.sort(function(e,t){return e.getTime()-t.getTime()})}),U=a.guard(["date","date","date"],function(e,t,r){var n=Y(e,t),u=o(n,2),i=u[0],a=u[1],s=i.getTime(),f=a.getTime(),d=r.getTime();return f>=d&&d>=s}),C=a.guard("date",function(e){return e.getFullYear()+"-"+m(e.getMonth()+1)+"-"+m(e.getDate())}),V=a.Dispatcher([C,a.guard("string",function(e){return C(z(e))})]);e.toDateInput=j,e.toTimeInput=I,e.toPaperDate=M,e.toPaperTime=Z,e.dateify=z,e.deDateify=F,e.isLeapYear=L,e.toUTCDateString=P,e.destructure=T,e.order=Y,e.inRange=U,e.isValidDate=N,e.isValidTime=A,e.toInputDateString=V});